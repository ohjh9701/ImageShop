<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.mapper.ReplyMapper">
	
	<!-- 사용자 정의 resultMap 요소 정의 -->
	<resultMap type="Reply" id="replyMap">
		<result property="replyNo" column="reply_no" />
		<result property="userNo" column="user_no" />
		<result property="boardNo" column="board_no" />
		<result property="content" column="content" />
		<result property="regDate" column="reg_date" />
		<collection property="member" resultMap="memberMap">
		</collection>
	</resultMap>
	<resultMap type="Member" id="memberMap">
		<result property="userNo" column="user_no" />
		<result property="userId" column="user_id" />
	</resultMap>

	<insert id="replyRegister">
		insert into reply values(reply_seq.nextval, #{userNo}, #{boardNo}, #{content}, sysdate)
	</insert>
	
	<select id="list">
		SELECT
    r.content,
    r.reg_date,
    m.user_id
FROM board b
INNER JOIN reply r
    ON b.board_no = r.board_no
    inner join member m on r.user_no = m.user_no
WHERE b.board_no = #{boardNo} order by r.reply_no asc
	</select>

</mapper> 